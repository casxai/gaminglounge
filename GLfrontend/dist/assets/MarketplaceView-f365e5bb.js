import{_ as u,u as m,P as _,L as g,F as f,a as P,r as s,o,c as a,b as n,d as r,e as y,f as w}from"./index-3072d2fe.js";const x={name:"MarketplaceView",emits:["postDeleted"],setup(){return{userStore:m()}},components:{PeopleYouMayKnow:_,LeftPanel:g,FeedItem:f},data(){return{posts:[],body:"",currentPage:1,totalPages:null,perPage:5,hasNext:!1}},mounted(){this.getFeed(),this.userStore.initStore(),window.onscroll=()=>{document.documentElement.scrollTop+window.innerHeight===document.documentElement.offsetHeight&&this.hasNext&&(this.currentPage+=1,this.getFeed())}},methods:{deletePost(e){this.posts=this.posts.filter(t=>t.id!==e)},handlePostDeleted(e){this.posts=this.posts.filter(t=>t.id!==e),this.user&&(this.user.posts_count-=1)},getFeed(){P.get(`/api/posts/marketplace_posts/?page=${this.currentPage}`).then(e=>{this.posts=this.posts.concat(e.data.results),this.totalPages=Math.ceil(e.data.count/this.perPage),this.hasNext=!!e.data.next,console.log(e.data)}).catch(e=>{console.log("error",e)})},search(){this.$router.push({name:"search",query:{q:this.searchQuery}})}}},k={"data-te-infinite-scroll-init":"",class:"max-w-screen pt-4 mx-auto grid grid-cols-4 gap-4 px-12"},F={class:"main-left space-y-6 sticky h-screen"},b={class:"px-4 main-center col-span-2 space-y-6"},v={class:"main-right col-span-1 space-y-6 sticky h-screen"};function M(e,t,D,L,i,l){const d=s("LeftPanel"),p=s("FeedItem"),h=s("PeopleYouMayKnow");return o(),a("div",k,[n("div",F,[r(d)]),n("div",b,[(o(!0),a(y,null,w(i.posts,c=>(o(),a("div",{class:"p-5 bg-purple_main rounded-full border-2 border-gray-400",key:c.id},[r(p,{post:c,onPostDeleted:l.handlePostDeleted},null,8,["post","onPostDeleted"])]))),128))]),n("div",v,[r(h)])])}const S=u(x,[["render",M]]);export{S as default};
